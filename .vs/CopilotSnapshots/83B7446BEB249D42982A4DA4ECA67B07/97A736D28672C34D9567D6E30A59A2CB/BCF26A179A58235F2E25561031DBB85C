# 👥 Guide de Création des Identifiants de Connexion

## 🎯 Objectif
Créer automatiquement les identifiants pour les deux rôles:
- **Enseignant**
- **Administrateur**

---

## 📋 Identifiants à Créer

### Enseignant
```
Email:    enseignant@test.com
Password: password
Rôle:     enseignant
```

### Administrateur
```
Email:    admin@test.com
Password: password
Rôle:     admin
```

---

## ✨ 3 Méthodes pour Créer les Utilisateurs

### Méthode 1️⃣: Commande Artisan (Recommandée)

```bash
# Exécuter la commande Artisan
php artisan users:create-test
```

**Avantages**:
- ✅ Méthode la plus simple
- ✅ Sortie colorée et claire
- ✅ Vérification d'erreurs intégrée
- ✅ Pas de dépendances externes

**Résultat**:
```
╔════════════════════════════════════════════════════════╗
║   CREFER - Création des Utilisateurs Test              ║
╚════════════════════════════════════════════════════════╝

📚 Création de l'utilisateur Enseignant...
✅ Enseignant créé/mis à jour:
   Email: enseignant@test.com
   Mot de passe: password
   Rôle: enseignant
   ID: 1

🔧 Création de l'utilisateur Administrateur...
✅ Administrateur créé/mis à jour:
   Email: admin@test.com
   Mot de passe: password
   Rôle: admin
   ID: 2
```

---

### Méthode 2️⃣: Script PHP Autonome

```bash
# Exécuter le script PHP
php create-users.php
```

**Avantages**:
- ✅ Fonctionne sans Artisan
- ✅ Script autonome
- ✅ Sortie formatée

**Fichier**: `create-users.php`

---

### Méthode 3️⃣: Script PowerShell (Windows)

```powershell
# Exécuter le script PowerShell
.\create-users.ps1
```

**Avantages**:
- ✅ Interface graphique Windows
- ✅ Vérifications intégrées
- ✅ Affichage formaté

**Fichier**: `create-users.ps1`

---

### Méthode 4️⃣: Tinker Interactif

```bash
# Lancer Tinker
php artisan tinker

# Ensuite, exécuter:
>>> use App\Models\User;
>>> use Illuminate\Support\Facades\Hash;
>>> User::create([
>>>     'name' => 'Enseignant Test',
>>>     'email' => 'enseignant@test.com',
>>>     'password' => Hash::make('password'),
>>>     'role' => 'enseignant',
>>>     'email_verified_at' => now()
>>> ]);
>>> User::create([
>>>     'name' => 'Admin Test',
>>>     'email' => 'admin@test.com',
>>>     'password' => Hash::make('password'),
>>>     'role' => 'admin',
>>>     'email_verified_at' => now()
>>> ]);
>>> exit
```

---

## 🚀 Procédure Complète (Étape par Étape)

### Étape 1: Naviguer vers le projet
```bash
cd "C:\Users\conce\Desktop\PROJET-N-Don-Energy\CREFER_PROJET"
```

### Étape 2: Créer les utilisateurs
Choisir l'une des 4 méthodes ci-dessus.

**Recommandé**: Méthode 1 (Commande Artisan)
```bash
php artisan users:create-test
```

### Étape 3: Vérifier la création
```bash
# Option 1: Avec Tinker
php artisan tinker
>>> User::where('role', 'enseignant')->first()
>>> User::where('role', 'admin')->first()
>>> exit

# Option 2: Vérifier dans la BD directement (PHPMyAdmin, etc.)
```

### Étape 4: Lancer le serveur
```bash
php artisan serve
```

### Étape 5: Tester la connexion
1. Aller à `http://localhost:8000`
2. Sélectionner le rôle (Enseignant ou Admin)
3. Entrer les identifiants
4. Vérifier le dashboard

---

## 🔍 Vérifier les Utilisateurs Créés

### Via Tinker
```bash
php artisan tinker
>>> User::all()  # Affiche tous les utilisateurs
>>> User::where('role', 'enseignant')->get()  # Enseignants
>>> User::where('role', 'admin')->get()  # Admins
>>> exit
```

### Via Artisan
```bash
# Lister tous les utilisateurs
php artisan tinker

# Compter
>>> User::count()  # Total d'utilisateurs
>>> User::where('role', 'enseignant')->count()  # Nombre d'enseignants
>>> User::where('role', 'admin')->count()  # Nombre d'admins
```

### Via Base de Données
```sql
-- Vérifier la table users
SELECT email, role, created_at FROM users WHERE role IN ('enseignant', 'admin');

-- Vérifier les deux utilisateurs créés
SELECT * FROM users WHERE email IN ('enseignant@test.com', 'admin@test.com');
```

---

## ✅ Checklist Après Création

- [ ] Utilisateur enseignant créé (email: enseignant@test.com)
- [ ] Utilisateur admin créé (email: admin@test.com)
- [ ] Serveur en cours d'exécution (php artisan serve)
- [ ] Page de connexion accessible (http://localhost:8000)
- [ ] Connexion enseignant fonctionnelle
- [ ] Connexion admin fonctionnelle
- [ ] Dashboard enseignant s'affiche
- [ ] Dashboard admin s'affiche
- [ ] Pas de navigation visible
- [ ] Footer minimaliste présent

---

## 🆘 Dépannage

### Problème: "Command not found: users:create-test"
**Solution**: Assurez-vous que le fichier `app/Console/Commands/CreateTestUsers.php` existe et que la classe est correctement enregistrée.

### Problème: "Class not found User"
**Solution**: Vérifier que le modèle User existe dans `app/Models/User.php`

### Problème: "Database connection error"
**Solution**: 
```bash
# Vérifier la configuration .env
cat .env | grep DB_

# Exécuter les migrations
php artisan migrate
```

### Problème: "The password is not hashed"
**Solution**: Assurez-vous d'utiliser `Hash::make()` pour les mots de passe

### Problème: Les utilisateurs existent déjà
**Solution**: 
- Supprimer les utilisateurs existants: `php artisan tinker` → `User::where('email', 'enseignant@test.com')->delete()`
- Ou utiliser `updateOrCreate()` qui met à jour s'il existe

---

## 📊 Données Créées

### Table `users` (Après exécution)

| ID | name | email | role | password | email_verified_at | created_at |
|----|------|-------|------|----------|-------------------|------------|
| 1 | Enseignant Test | enseignant@test.com | enseignant | [hashed] | now | now |
| 2 | Admin Test | admin@test.com | admin | [hashed] | now | now |

---

## 🔐 Sécurité

### ⚠️ Important
Ces identifiants sont **pour le test uniquement** sur environnement local.

### Ne Pas Utiliser en Production
- Changer les mots de passe
- Utiliser des emails réels
- Implémenter 2FA
- Auditer les accès

---

## 📝 Commandes Utiles

```bash
# Créer les utilisateurs
php artisan users:create-test

# Vérifier les utilisateurs
php artisan tinker
>>> User::all()

# Réinitialiser la BD
php artisan migrate:refresh --seed

# Voir tous les utilisateurs dans la console
php artisan tinker
>>> foreach(User::all() as $user) { echo $user->email . ' - ' . $user->role . "\n"; }
```

---

## 🎯 Prochaines Étapes

Après avoir créé les utilisateurs:

1. ✅ Lancer le serveur
2. ✅ Tester la connexion
3. ✅ Vérifier les dashboards
4. ✅ Consulter la documentation

---

## 📞 Support

Besoin d'aide?
- Consulter: `COMPLETION_SUMMARY.md`
- Consulter: `TESTING_GUIDE.md`
- Consulter: `INDEX.md` (FAQ)

---

**Créé**: 2025
**Version**: 1.0
**Status**: ✅ Prêt à utiliser
