#!/usr/bin/env pwsh

# Script PowerShell pour créer les utilisateurs test CREFER

Write-Host "╔════════════════════════════════════════════════════════╗" -ForegroundColor Cyan
Write-Host "║   CREFER - Création des Utilisateurs Test             ║" -ForegroundColor Cyan
Write-Host "╚════════════════════════════════════════════════════════╝" -ForegroundColor Cyan
Write-Host ""

# Vérifier que PHP est installé
Write-Host "🔍 Vérification de PHP..." -ForegroundColor Yellow
if (-not (Get-Command php -ErrorAction SilentlyContinue)) {
    Write-Host "❌ PHP n'est pas installé ou n'est pas dans le PATH" -ForegroundColor Red
    exit 1
}

Write-Host "✅ PHP trouvé" -ForegroundColor Green
Write-Host ""

# Exécuter le script PHP
Write-Host "⚙️  Exécution du script de création d'utilisateurs..." -ForegroundColor Yellow
Write-Host ""

php create-users.php

if ($LASTEXITCODE -eq 0) {
    Write-Host "✨ Utilisateurs créés avec succès!" -ForegroundColor Green
    Write-Host ""
    Write-Host "📖 Consulter COMPLETION_SUMMARY.md pour plus de détails" -ForegroundColor Cyan
} else {
    Write-Host "❌ Erreur lors de la création des utilisateurs" -ForegroundColor Red
    exit 1
}
